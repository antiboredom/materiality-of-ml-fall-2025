<!doctype html>
<html lang="">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title></title>
  </head>
  <body>
    <textarea
      id="input"
      rows="4"
      cols="50"
      placeholder="Type your message here..."
    ></textarea>
    <button id="send">Send</button>
    <div id="response"></div>

    <script>
      document.getElementById("send").addEventListener("click", async () => {
        const input = document.getElementById("input").value;
        const responseDiv = document.getElementById("response");

        responseDiv.innerHTML = "Loading...";

        try {
          const response = await fetch(
            "http://localhost:1234/v1/chat/completions",
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                model: "dolphin3.0-llama3.1-8b",
                messages: [
                  {
                    role: "system",
                    content: "Always answer in rhymes. Today is Thursday",
                  },
                  {
                    role: "user",
                    content: input,
                  },
                ],
                temperature: 0.7,
                max_tokens: -1,
                stream: false,
              }),
            },
          );
          console.log(response);

          const data = await response.json();
          console.log(data);
          const message = data.choices[0].message.content;
          responseDiv.innerHTML = `<strong>Response:</strong> ${message}`;
        } catch (error) {
          responseDiv.innerHTML = `<strong>Error:</strong> ${error.message}`;
        }
      });
    </script>
  </body>
</html>
